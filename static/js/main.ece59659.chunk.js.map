{"version":3,"sources":["firebase/firebase.utils.js","components/message.component.jsx","pages/chatpage.component.jsx","components/header.component.jsx","pages/homepage.component.jsx","pages/signpage.component.jsx","pages/loginpage.component.jsx","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","firestore","signInWithGoogle","a","setPersistence","Auth","Persistence","SESSION","provider","GoogleAuthProvider","setCustomParameters","prompt","signInWithPopup","createNewUser","name","email","password","createUserWithEmailAndPassword","user","updateProfile","displayName","logIn","signInWithEmailAndPassword","Message","sender","content","time","isReceived","color","className","style","ChatPage","history","useState","newMsgContent","setNewMsgContent","messages","setMessages","colorHueDictionary","setColorHueDictionary","scrollerDummy","useRef","textArea","useEffect","unsubFromFirestore","collection","orderBy","limit","onSnapshot","snapshot","console","log","dbMessages","forEach","msg","msgWithId","id","data","push","error","senders","map","senderId","uniqueSenders","filter","indx","indexOf","colorHueDistance","Math","ceil","length","colorSenderDict","i","current","scrollIntoView","behavior","sendMessage","event","preventDefault","add","senderName","sentAt","Date","textContent","logOut","signOut","code","message","onClick","toDate","toLocaleString","ref","onSubmit","role","contentEditable","onInput","target","type","Header","HomePage","isLoggedIn","SignPage","userName","setUserName","userEmail","setUserEmail","userPass","setUserPass","handleInput","value","handleUserCreation","alert","placeholder","onChange","required","LoginPage","handleLogIn","handleGoogleSignin","credentials","App","setIsLoggedIn","userInfo","setUserInfo","unsubFromAuth","onAuthStateChanged","userAuth","uid","exact","path","render","props","component","to","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ece59659.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/firestore';\r\n\r\nconst firebaseConfig = {\r\n\tapiKey: 'AIzaSyCr-FYUZWwOEm1KPpk7hWS3oV1-BNEg96Q',\r\n\tauthDomain: 'my-chat-app-aa73c.firebaseapp.com',\r\n\tprojectId: 'my-chat-app-aa73c',\r\n\tstorageBucket: 'my-chat-app-aa73c.appspot.com',\r\n\tmessagingSenderId: '422748533719',\r\n\tappId: '1:422748533719:web:2fc9ec870dbeaf4bad9192',\r\n\tmeasurementId: 'G-ZVBXSF1QPL',\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\n// Authentication\r\nexport const auth = firebase.auth();\r\n\r\n// Database\r\nexport const firestore = firebase.firestore();\r\n\r\n// UTILIS -> Google Auth\r\nexport async function signInWithGoogle() {\r\n\ttry {\r\n\t\t// Setting persistance\r\n\t\tawait auth.setPersistence(firebase.auth.Auth.Persistence.SESSION);\r\n\t\t// Configuring provider\r\n\t\tlet provider = new firebase.auth.GoogleAuthProvider();\r\n\t\tprovider.setCustomParameters({ prompt: 'select_account' });\r\n\t\t// Signing in\r\n\t\tawait auth.signInWithPopup(provider);\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\n// UTILS -> Create New User\r\nexport async function createNewUser(name, email, password) {\r\n\ttry {\r\n\t\t// Setting persistance\r\n\t\tawait auth.setPersistence(firebase.auth.Auth.Persistence.SESSION);\r\n\t\t// Create new user with email and password\r\n\t\tlet { user } = await auth.createUserWithEmailAndPassword(email, password);\r\n\t\t// Adding the name to the user profile\r\n\t\tawait user.updateProfile({\r\n\t\t\tdisplayName: name,\r\n\t\t});\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\n// UTILS -> Log in\r\nexport async function logIn(email, password) {\r\n\ttry {\r\n\t\tawait auth.setPersistence(firebase.auth.Auth.Persistence.SESSION);\r\n\t\tawait auth.signInWithEmailAndPassword(email, password);\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n","import React from 'react';\r\n\r\nimport './message.style.css';\r\n\r\nconst Message = ({ sender, content, time, isReceived, color }) => {\r\n\treturn (\r\n\t\t<div className={'message ' + (isReceived ? 'received' : '')}>\r\n\t\t\t<h4 className='name' style={{ color: `hsl(${color}, 100%, 40%)` }}>\r\n\t\t\t\t{sender}\r\n\t\t\t</h4>\r\n\t\t\t<p className='content'>{content}</p>\r\n\t\t\t<time className='date'>{time}</time>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Message;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport Message from '../components/message.component';\r\nimport { auth, firestore } from '../firebase/firebase.utils';\r\n\r\nimport './chatpage.style.css';\r\n\r\nconst ChatPage = ({ user, history }) => {\r\n\tconst [newMsgContent, setNewMsgContent] = useState('');\r\n\tconst [messages, setMessages] = useState([]);\r\n\tconst [colorHueDictionary, setColorHueDictionary] = useState([]);\r\n\r\n\t// Reference di un div vuoto alla fine della lista dei messaggi. Utile per lo scrolling automatico\r\n\tconst scrollerDummy = useRef();\r\n\tconst textArea = useRef();\r\n\r\n\tuseEffect(() => {\r\n\t\t// Al caricamento del componente, viene fatta una iscrizione ad un listener del database, che aggiorna lo stato messages ogni volta che rileva un nuovo messaggio nel db\r\n\t\tconst unsubFromFirestore = firestore\r\n\t\t\t.collection('messages/')\r\n\t\t\t.orderBy('sentAt')\r\n\t\t\t.limit(25)\r\n\t\t\t.onSnapshot(\r\n\t\t\t\tsnapshot => {\r\n\t\t\t\t\tconsole.log('Updating the chat from db!');\r\n\t\t\t\t\tlet dbMessages = [];\r\n\t\t\t\t\tsnapshot.forEach(msg => {\r\n\t\t\t\t\t\tlet msgWithId = {\r\n\t\t\t\t\t\t\tid: msg.id,\r\n\t\t\t\t\t\t\t...msg.data(),\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tdbMessages.push(msgWithId);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetMessages(dbMessages);\r\n\t\t\t\t},\r\n\t\t\t\terror => console.error(error)\r\n\t\t\t);\r\n\r\n\t\treturn () => unsubFromFirestore();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\t// Ogni volta che lo stato messages cambia viene creato un dizionario che assegna un colore (solo il valore Hue) ad ogni sender ...\r\n\t\tlet senders = messages.map(msg => msg.senderId);\r\n\t\tlet uniqueSenders = senders.filter(\r\n\t\t\t(sender, indx) => senders.indexOf(sender) === indx\r\n\t\t);\r\n\t\tlet colorHueDistance = Math.ceil(360 / uniqueSenders.length);\r\n\t\tlet colorSenderDict = {};\r\n\t\tfor (let i = 0; i < uniqueSenders.length; i++) {\r\n\t\t\tcolorSenderDict[uniqueSenders[i]] = i * colorHueDistance;\r\n\t\t}\r\n\t\tsetColorHueDictionary(colorSenderDict);\r\n\r\n\t\t// ... E la chat scorre in basso fino al nuovo messaggio\r\n\t\tscrollerDummy.current.scrollIntoView({ behavior: 'smooth' });\r\n\t}, [messages]);\r\n\r\n\tconst handleChange = event => {\r\n\t\tevent.preventDefault();\r\n\t\tsetNewMsgContent(event.target.textContent);\r\n\t};\r\n\r\n\tconst sendMessage = async event => {\r\n\t\tevent.preventDefault();\r\n\t\tif (newMsgContent === '') {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tawait firestore.collection('messages/').add({\r\n\t\t\t\tsenderId: user.id,\r\n\t\t\t\tsenderName: user.name,\r\n\t\t\t\tcontent: newMsgContent,\r\n\t\t\t\tsentAt: new Date(),\r\n\t\t\t});\r\n\t\t\tsetNewMsgContent('');\r\n\t\t\ttextArea.current.textContent = '';\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error sending message: ', error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst logOut = async () => {\r\n\t\ttry {\r\n\t\t\tawait auth.signOut();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error during sign-out: ', error.code, error.message);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='chatpage'>\r\n\t\t\t<header className='top-bar'>\r\n\t\t\t\t<h2 className='logo' onClick={() => history.push('/')}>\r\n\t\t\t\t\tTHE CHAT\r\n\t\t\t\t</h2>\r\n\t\t\t\t<span className='sign-out' onClick={logOut}>\r\n\t\t\t\t\tSign Out\r\n\t\t\t\t</span>\r\n\t\t\t</header>\r\n\r\n\t\t\t<div className='chat-container'>\r\n\t\t\t\t<div className='chat-slider'>\r\n\t\t\t\t\t{messages.map(msg => (\r\n\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\tkey={msg.id}\r\n\t\t\t\t\t\t\tsender={msg.senderName}\r\n\t\t\t\t\t\t\tcontent={msg.content}\r\n\t\t\t\t\t\t\ttime={msg.sentAt.toDate().toLocaleString()}\r\n\t\t\t\t\t\t\tisReceived={msg.senderId !== user.id}\r\n\t\t\t\t\t\t\tcolor={colorHueDictionary[msg.senderId]}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t\t<div ref={scrollerDummy}></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<form className='chat-controls' onSubmit={sendMessage}>\r\n\t\t\t\t<span\r\n\t\t\t\t\tclassName='text-area'\r\n\t\t\t\t\trole='textbox'\r\n\t\t\t\t\tcontentEditable\r\n\t\t\t\t\tonInput={handleChange}\r\n\t\t\t\t\tref={textArea}\r\n\t\t\t\t/>\r\n\t\t\t\t<button className='btn' type='submit'>\r\n\t\t\t\t\tSEND\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ChatPage;\r\n","import React from 'react';\r\nimport './header.style.css';\r\n\r\nconst Header = ({ history }) => {\r\n\treturn (\r\n\t\t<header className='header'>\r\n\t\t\t<h1 className='title' onClick={() => history.push('/')}>\r\n\t\t\t\tThe Chat\r\n\t\t\t</h1>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport Header from '../components/header.component';\r\nimport { auth } from '../firebase/firebase.utils';\r\n\r\nimport './homepage.style.css';\r\n\r\nconst HomePage = ({ isLoggedIn, history }) => {\r\n\tconst logOut = async () => {\r\n\t\ttry {\r\n\t\t\tawait auth.signOut();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error during sign-out: ', error.code, error.message);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Header history={history} />\r\n\r\n\t\t\t<div className='homepage card flex-column'>\r\n\t\t\t\t<h2>\r\n\t\t\t\t\tWelcome to <span className='logo'>The Chat</span>\r\n\t\t\t\t</h2>\r\n\t\t\t\t{isLoggedIn ? (\r\n\t\t\t\t\t<div className='container'>\r\n\t\t\t\t\t\t<p>Start chatting with your friends</p>\r\n\t\t\t\t\t\t<button className='btn' onClick={() => history.push('/chat')}>\r\n\t\t\t\t\t\t\tSTART\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<p className='link' onClick={logOut}>\r\n\t\t\t\t\t\t\tLog out\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className='container'>\r\n\t\t\t\t\t\t<p>Please login</p>\r\n\t\t\t\t\t\t<button className='btn' onClick={() => history.push('/login')}>\r\n\t\t\t\t\t\t\tLOG IN\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<p className='link' onClick={() => history.push('/signin')}>\r\n\t\t\t\t\t\t\tAre you new? Register\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default HomePage;\r\n","import React, { useState } from 'react';\r\nimport { createNewUser } from '../firebase/firebase.utils';\r\n\r\nimport './signpage.style.css';\r\n\r\nimport Header from '../components/header.component';\r\n\r\nconst SignPage = ({ history }) => {\r\n\tconst [userName, setUserName] = useState('');\r\n\tconst [userEmail, setUserEmail] = useState('');\r\n\tconst [userPass, setUserPass] = useState('');\r\n\r\n\tconst handleInput = event => {\r\n\t\tevent.preventDefault();\r\n\t\tswitch (event.target.name) {\r\n\t\t\tcase 'name':\r\n\t\t\t\tsetUserName(event.target.value);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'email':\r\n\t\t\t\tsetUserEmail(event.target.value);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'password':\r\n\t\t\t\tsetUserPass(event.target.value);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.error('Something went wrong with the input');\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleUserCreation = async event => {\r\n\t\tevent.preventDefault();\r\n\t\ttry {\r\n\t\t\tawait createNewUser(userName, userEmail, userPass);\r\n\t\t\tsetUserName('');\r\n\t\t\tsetUserEmail('');\r\n\t\t\tsetUserPass('');\r\n\t\t\thistory.push('/');\r\n\t\t} catch (error) {\r\n\t\t\talert('Something went wrong, try again');\r\n\t\t\tconsole.error(\r\n\t\t\t\t'An error occurred during registration: ',\r\n\t\t\t\terror.code,\r\n\t\t\t\terror.message\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Header history={history} />\r\n\r\n\t\t\t<div className='signpage card flex-column'>\r\n\t\t\t\t<h3>Sign in with your email and password</h3>\r\n\t\t\t\t<form className='sign-form' onSubmit={handleUserCreation}>\r\n\t\t\t\t\t<div className='container'>\r\n\t\t\t\t\t\t<label>Full Name</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tplaceholder='insert your name'\r\n\t\t\t\t\t\t\tname='name'\r\n\t\t\t\t\t\t\tvalue={userName}\r\n\t\t\t\t\t\t\tonChange={handleInput}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='container'>\r\n\t\t\t\t\t\t<label className='email-label'>Email</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\tplaceholder='insert your email'\r\n\t\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\t\tvalue={userEmail}\r\n\t\t\t\t\t\t\tonChange={handleInput}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='container'>\r\n\t\t\t\t\t\t<label>Password</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\tplaceholder='insert your password'\r\n\t\t\t\t\t\t\tname='password'\r\n\t\t\t\t\t\t\tvalue={userPass}\r\n\t\t\t\t\t\t\tonChange={handleInput}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button className='btn' type='submit'>\r\n\t\t\t\t\t\tSIGN IN\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SignPage;\r\n","import React, { useState } from 'react';\r\nimport { signInWithGoogle, logIn } from '../firebase/firebase.utils';\r\n\r\nimport './loginpage.style.css';\r\n\r\nimport Header from '../components/header.component';\r\n\r\nconst LoginPage = ({ history }) => {\r\n\tconst [userEmail, setUserEmail] = useState('');\r\n\tconst [userPass, setUserPass] = useState('');\r\n\r\n\tconst handleInput = event => {\r\n\t\tevent.preventDefault();\r\n\t\tswitch (event.target.name) {\r\n\t\t\tcase 'email':\r\n\t\t\t\tsetUserEmail(event.target.value);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'password':\r\n\t\t\t\tsetUserPass(event.target.value);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.error('Something is wrong with the input');\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleLogIn = async event => {\r\n\t\tevent.preventDefault();\r\n\t\ttry {\r\n\t\t\tawait logIn(userEmail, userPass);\r\n\t\t\tsetUserEmail('');\r\n\t\t\tsetUserPass('');\r\n\t\t\thistory.push('/');\r\n\t\t} catch (error) {\r\n\t\t\talert('Credential are wrong');\r\n\t\t\tconsole.error('Error during sign-in: ', error.code, error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleGoogleSignin = async () => {\r\n\t\ttry {\r\n\t\t\tawait signInWithGoogle();\r\n\t\t\thistory.push('/');\r\n\t\t} catch (error) {\r\n\t\t\talert('Something went wrong, try again!');\r\n\t\t\tconsole.error(\r\n\t\t\t\t'Error in Google signin: ',\r\n\t\t\t\terror.code,\r\n\t\t\t\terror.message,\r\n\t\t\t\terror.credentials\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Header history={history} />\r\n\r\n\t\t\t<div className='loginpage card flex-column'>\r\n\t\t\t\t<div className='option'>\r\n\t\t\t\t\t<h3>Login with your email and password</h3>\r\n\t\t\t\t\t<form onSubmit={handleLogIn}>\r\n\t\t\t\t\t\t<label>Email</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\tplaceholder='insert your email'\r\n\t\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\t\tvalue={userEmail}\r\n\t\t\t\t\t\t\tonChange={handleInput}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label>Password</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\tplaceholder='insert your password'\r\n\t\t\t\t\t\t\tname='password'\r\n\t\t\t\t\t\t\tvalue={userPass}\r\n\t\t\t\t\t\t\tonChange={handleInput}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<button className='btn' type='submit'>\r\n\t\t\t\t\t\t\tLOG IN\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<hr />\r\n\r\n\t\t\t\t<div className='option'>\r\n\t\t\t\t\t<h3>Login with Google</h3>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='btn btn-google'\r\n\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\tonClick={handleGoogleSignin}>\r\n\t\t\t\t\t\tLOG IN WITH GOOGLE\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default LoginPage;\r\n","import React, { useState, useEffect } from 'react';\nimport { Redirect, Route } from 'react-router';\nimport { auth } from './firebase/firebase.utils';\nimport './App.css';\n\nimport ChatPage from './pages/chatpage.component';\nimport HomePage from './pages/homepage.component';\nimport SignPage from './pages/signpage.component';\nimport LoginPage from './pages/loginpage.component';\n\nfunction App() {\n\tconst [isLoggedIn, setIsLoggedIn] = useState(false);\n\tconst [userInfo, setUserInfo] = useState({ id: '', name: '' });\n\n\tuseEffect(() => {\n\t\tconst unsubFromAuth = auth.onAuthStateChanged(async userAuth => {\n\t\t\tconsole.log('Auth state changed: ', userAuth);\n\t\t\tif (userAuth) {\n\t\t\t\tconsole.log('A new user logged in');\n\t\t\t\tsetUserInfo({\n\t\t\t\t\tid: userAuth.uid,\n\t\t\t\t\tname: userAuth.displayName,\n\t\t\t\t});\n\t\t\t\tsetIsLoggedIn(true);\n\t\t\t} else {\n\t\t\t\tsetIsLoggedIn(false);\n\t\t\t\tsetUserInfo({ id: '', name: '' });\n\t\t\t}\n\t\t});\n\n\t\treturn () => unsubFromAuth();\n\t}, []);\n\n\treturn (\n\t\t<div className='App'>\n\t\t\t<Route\n\t\t\t\texact\n\t\t\t\tpath='/'\n\t\t\t\trender={props => <HomePage {...props} isLoggedIn={isLoggedIn} />}\n\t\t\t/>\n\t\t\t<Route path='/login' component={LoginPage} />\n\t\t\t<Route path='/signin' component={SignPage} />\n\t\t\t<Route\n\t\t\t\tpath='/chat'\n\t\t\t\trender={\n\t\t\t\t\tprops =>\n\t\t\t\t\t\tisLoggedIn ? (\n\t\t\t\t\t\t\t<ChatPage {...props} user={userInfo} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Redirect to='/' />\n\t\t\t\t\t\t)\n\t\t\t\t\t//<ChatPage {...props} user={userInfo} />\n\t\t\t\t}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport './index.css';\n\nimport App from './App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<BrowserRouter>\n\t\t\t<App />\n\t\t</BrowserRouter>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}